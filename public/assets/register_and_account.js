App.Views.Shared={EnableBacklogEstimationPreferences:function(a,b){var c=b=="backlog"?"":"_default",d=!1,e=function(){$("input#"+b+"_days_estimatable_false").is(":checked")?(a.find("#"+b+c+"_velocity").rules("add",{required:!1}),a.find("input#velocity_was").val(a.find("input#"+b+c+"_velocity").val()),a.find("input#rate_was").val(a.find("input#"+b+c+"_rate").val()),a.find("input#"+b+c+"_velocity, input#"+b+c+"_rate").val(""),a.find(".cost-elements").hide(),a.find("#days_estimatable_false_label").addClass("selected"),a.find("#days_estimatable_true_label").removeClass("selected")):(a.find("input#"+b+c+"_velocity").rules("add",{required:!0}),a.find("input#velocity_was").val()&&a.find("input#"+b+c+"_velocity").val(a.find("input#velocity_was").val()),a.find("input#rate_was").val()&&a.find("input#"+b+c+"_rate").val(a.find("input#rate_was").val()),a.find("#days_estimatable_true_label").addClass("selected"),a.find("#days_estimatable_false_label").removeClass("selected"),a.find(".cost-elements").slideDown())};return!d&&a.find("input#"+b+"_days_estimatable_false").is(":checked")&&_.include(["","false","f"],a.find("input#account_defaults_set").val())&&($("input#"+b+"_days_estimatable_true").attr("checked",!0),d=!0),e(),$("input#"+b+"_days_estimatable_false, input#"+b+"_days_estimatable_true").change(function(){e()}),e}},$(document).ready(function(){var a={},b=$("form#new_user, form#new_account, form.edit_account");b.find("input#account_name").length&&(a={"account[name]":{required:!0,remote:"/accounts/name_available"+(b.find("input#account_name_original").length?"?except="+escape(b.find("input#account_name_original").val()):"")},"account[locale_id]":{required:!0}},b.find("input#account_default_rate").length&&_.extend(a,{"account[default_rate]":{number:!0,min:0},"account[default_velocity]":{number:!0,min:0}})),b.find("input#user_name")&&_.extend(a,{"user[name]":"required","user[email]":{required:!0,email:!0,remote:"/users/email_available"},"user[password]":{required:!0,minlength:6},"user[password_confirmation]":{required:!0,equalTo:"#user_password"}}),b.validate({rules:a,messages:{"account[name]":{required:"You must enter an account name",remote:"An account with this name is already set up.  Please enter another name."},"user[name]":{required:"Please enter your full name"},"user[email]":{email:"Please enter a valid email address",remote:'Someone is already registered with that email address.  <a href="/users/sign_in/">Login now</a>.'},"user[password_confirmation]":{equalTo:"The password confirmation is not the same as the password entered"}},success:function(a){a.html("&nbsp;").addClass("correct")}}),b.submit(function(){b.valid()&&($(window).scrollTop(1e6),$("form#user_new input#user_submit, form#new_account input#account_submit").addClass("greyed").attr("disabled","true").val("Preparing your account..."),$(".waiting").slideDown())}),$("#account_days_estimatable_false").length&&App.Views.Shared.EnableBacklogEstimationPreferences(b,"account")});