App.Views.Shared={EnableBacklogEstimationPreferences:function(a,b){var c=b=="backlog"?"":"_default",d=!1,e=function(){$("input#"+b+"_days_estimatable_false").is(":checked")?(a.find("#"+b+c+"_velocity").rules("add",{required:!1}),a.find("input#velocity_was").val(a.find("input#"+b+c+"_velocity").val()),a.find("input#rate_was").val(a.find("input#"+b+c+"_rate").val()),a.find("input#"+b+c+"_velocity, input#"+b+c+"_rate").val(""),a.find(".cost-elements").hide(),a.find("#days_estimatable_false_label").addClass("selected"),a.find("#days_estimatable_true_label").removeClass("selected")):(a.find("input#"+b+c+"_velocity").rules("add",{required:!0}),a.find("input#velocity_was").val()&&a.find("input#"+b+c+"_velocity").val(a.find("input#velocity_was").val()),a.find("input#rate_was").val()&&a.find("input#"+b+c+"_rate").val(a.find("input#rate_was").val()),a.find("#days_estimatable_true_label").addClass("selected"),a.find("#days_estimatable_false_label").removeClass("selected"),a.find(".cost-elements").slideDown())};return!d&&a.find("input#"+b+"_days_estimatable_false").is(":checked")&&_.include(["","false","f"],a.find("input#account_defaults_set").val())&&($("input#"+b+"_days_estimatable_true").attr("checked",!0),d=!0),e(),$("input#"+b+"_days_estimatable_false, input#"+b+"_days_estimatable_true").change(function(){e()}),e}},$(function(){var a=$("form#new_company, form.edit_company");a.validate({rules:{"company[default_rate]":{number:!0,min:0},"company[default_velocity]":{number:!0,min:0},"company[name]":{required:!0,remote:document.location.href.match(/\/accounts\/\d+\/companies/)+"/name_available"+(a.find("input#company_name_original").length?"?except="+escape(a.find("input#company_name_original").val()):"")}},messages:{"company[name]":{required:"You must enter a company name",remote:"A company with this name is already set up.  Please enter another name."}},success:function(a){a.html("&nbsp;").addClass("correct")}}),App.Views.Shared.EnableBacklogEstimationPreferences(a,"company")});