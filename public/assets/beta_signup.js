/**
 * jQuery lightBox plugin
 * This jQuery plugin was inspired and based on Lightbox 2 by Lokesh Dhakar (http://www.huddletogether.com/projects/lightbox2/)
 * and adapted to me for use like a plugin from jQuery.
 * @name jquery-lightbox-0.5.js
 * @author Leandro Vieira Pinho - http://leandrovieira.com
 * @version 0.5
 * @date April 11, 2008
 * @category jQuery plugin
 * @copyright (c) 2008 Leandro Vieira Pinho (leandrovieira.com)
 * @license CCAttribution-ShareAlike 2.5 Brazil - http://creativecommons.org/licenses/by-sa/2.5/br/deed.en_US
 * @example Visit http://leandrovieira.com/projects/jquery/lightbox/ for more informations about this jQuery plugin
 */
// Offering a Custom Alias suport - More info: http://docs.jquery.com/Plugins/Authoring#Custom_Alias
function showIntroVideo(){$.cookie("seen_intro_video")!=="true"&&($.cookie("seen_intro_video","true",{expires:365}),$("a.light-box.video-demo").click())}(function(a){a.fn.lightBox=function(b){function d(a){return a.preventDefault(),e(this,c),!1}function e(c,d){a("embed, object, select").css({visibility:"hidden"}),f(),b.imageArray.length=0,b.activeImage=0;if(d.length==1)b.imageArray.push(new Array(c.getAttribute("href"),c.getAttribute("title")));else for(var e=0;e<d.length;e++)b.imageArray.push(new Array(d[e].getAttribute("href"),d[e].getAttribute("title")));while(b.imageArray[b.activeImage][0]!=c.getAttribute("href"))b.activeImage++;g()}function f(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+b.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+b.imageBtnClose+'"></a></div></div></div></div>');var c=q();a("#jquery-overlay").css({backgroundColor:b.overlayBgColor,opacity:b.overlayOpacity,width:c[0],height:c[1]}).fadeIn();var d=r();a("#jquery-lightbox").css({top:d[1]+c[3]/10,left:d[0]}).show(),a("#jquery-overlay,#jquery-lightbox").click(function(){p()}),a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return p(),!1}),a(window).resize(function(){var b=q();a("#jquery-overlay").css({width:b[0],height:b[1]});var c=r();a("#jquery-lightbox").css({top:c[1]+b[3]/10,left:c[0]})})}function g(){a("#lightbox-loading").show(),b.fixedNavigation?a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();try{var c=b.imageArray[b.activeImage][0]}catch(d){throw new Error("Lightbox malfunctioned: \n("+b.imageArray+"), \nlength: ("+(b.imageArray?b.imageArray.length:"no length")+"), \nactiveImage: "+b.activeImage)}if(c.match(/player\.vimeo\.com/i)){var e=Number(c.match(/width=(\d+)/)[1]),f=Number(c.match(/height=(\d+)/)[1]);(!e||!f)&&alert("Vimeo dimensions are missing from URL: "+c);var g=a('<iframe src="'+c+'" width="'+e+'" height="'+f+'" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>');g.css("position","absolute").css("top","0").css("left","0"),a("img#lightbox-image").css("position","relative").css("width",e).css("height",f).after(g),b.hideNavigation=!0,h(e,f)}else{var i=new Image;i.onload=function(){a("#lightbox-image").attr("src",b.imageArray[b.activeImage][0]),h(i.width,i.height),i.onload=function(){}},i.src=b.imageArray[b.activeImage][0]}}function h(c,d){var e=a("#lightbox-container-image-box").width(),f=a("#lightbox-container-image-box").height(),g=c+b.containerBorderSize*2,h=d+b.containerBorderSize*2,j=e-g,k=f-h;a("#lightbox-container-image-box").animate({width:g,height:h},b.containerResizeSpeed,function(){i()}),j==0&&k==0&&(a.browser.msie?s(250):s(100)),a("#lightbox-container-image-data-box").css({width:c}),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:d+b.containerBorderSize*2})}function i(){a("#lightbox-loading").hide(),a("#lightbox-image").fadeIn(function(){j(),k()}),o()}function j(){a("#lightbox-container-image-data-box").slideDown("fast"),a("#lightbox-image-details-caption").hide(),b.imageArray[b.activeImage][1]&&a("#lightbox-image-details-caption").html(b.imageArray[b.activeImage][1]).show(),b.imageArray.length>1&&a("#lightbox-image-details-currentNumber").html(b.txtImage+" "+(b.activeImage+1)+" "+b.txtOf+" "+b.imageArray.length).show()}function k(){if(b.hideNavigation)return;a("#lightbox-nav").show(),a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+b.imageBlank+") no-repeat"}),b.activeImage!=0&&(b.fixedNavigation?a("#lightbox-nav-btnPrev").css({background:"url("+b.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return b.activeImage=b.activeImage-1,g(),!1}):a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+b.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+b.imageBlank+") no-repeat"})}).show().bind("click",function(){return b.activeImage=b.activeImage-1,g(),!1})),b.activeImage!=b.imageArray.length-1&&(b.fixedNavigation?a("#lightbox-nav-btnNext").css({background:"url("+b.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){return b.activeImage=b.activeImage+1,g(),!1}):a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+b.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+b.imageBlank+") no-repeat"})}).show().bind("click",function(){return b.activeImage=b.activeImage+1,g(),!1})),l()}function l(){a(document).keydown(function(a){n(a)})}function m(){a(document).unbind()}function n(a){a==null?(keycode=event.keyCode,escapeKey=27):(keycode=a.keyCode,escapeKey=a.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),(key==b.keyToClose||key=="x"||keycode==escapeKey)&&p(),(key==b.keyToPrev||keycode==37)&&b.activeImage!=0&&(b.activeImage=b.activeImage-1,g(),m()),(key==b.keyToNext||keycode==39)&&b.activeImage!=b.imageArray.length-1&&(b.activeImage=b.activeImage+1,g(),m())}function o(){b.imageArray.length-1>b.activeImage&&(objNext=new Image,objNext.src=b.imageArray[b.activeImage+1][0]),b.activeImage>0&&(objPrev=new Image,objPrev.src=b.imageArray[b.activeImage-1][0])}function p(){a("#jquery-lightbox").remove(),a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()}),a("embed, object, select").css({visibility:"visible"})}function q(){var a,b;window.innerHeight&&window.scrollMaxY?(a=window.innerWidth+window.scrollMaxX,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight);var c,d;return self.innerHeight?(document.documentElement.clientWidth?c=document.documentElement.clientWidth:c=self.innerWidth,d=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight):document.body&&(c=document.body.clientWidth,d=document.body.clientHeight),b<d?pageHeight=d:pageHeight=b,a<c?pageWidth=a:pageWidth=c,arrayPageSize=new Array(pageWidth,pageHeight,c,d),arrayPageSize}function r(){var a,b;return self.pageYOffset?(b=self.pageYOffset,a=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft),arrayPageScroll=new Array(a,b),arrayPageScroll}function s(a){var b=new Date;c=null;do var c=new Date;while(c-b<a)}b=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"/assets/lightbox-ico-loading.gif",imageBtnPrev:"/assets/lightbox-btn-prev.gif",imageBtnNext:"/assets/lightbox-btn-next.gif",imageBtnClose:"/assets/lightbox-btn-close.gif",imageBlank:"/assets/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0,hideNavigation:!1},b);var c=this;return this.unbind("click").click(d)}})(jQuery),$(document).ready(function(){function e(a){var b=!1;if($(this).val().match(/^\b[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,4}\b$/i))b=!0;else if(!$(this).data("original-value")||$(this).data("original-value")===$(this).val())a||(b=!0);return b?($(this).removeClass("invalid"),$(".error-message .container").html("")):($(this).addClass("invalid"),$(".error-message .container").html("Oops, that's not a valid email.<br/>Please try again.")),b}function f(b){var e,f,g;c.each(function(a,b){$(b).hasClass("selected")&&(e=a+1)}),b&&(c.removeClass("selected"),e<c.length?e+=1:e=1,$(".feature-nav ul li:nth-child("+e+")").addClass("selected")),f=$(".dual-cards .card.visible").css("z-index",10),g=f.find(".story-card"),a=f.find(".criteria-card"),d=!0,$(".dual-cards .card:nth-child("+(e+2)+")").addClass("visible").css("z-index",5),g.animate({left:"-=330",top:"-=60"},300,"easeInCubic",function(){f.css("z-index",1),g.animate({left:"+=330",top:"+=60"},300,"easeOutCubic",function(){f.removeClass("visible"),d=!1})}),a.animate({left:"+=330",top:"+=60"},300,"easeInCubic",function(){a.animate({left:"-=330",top:"-=60"},300,"easeOutCubic")})}var a,b,c,d;$("input[type=text]").inputLabelize(),$("input#beta_signup_email").blur(function(){e.call(this)}),$("form").submit(function(){return e.call($("input#beta_signup_email")[0],!0)?($(".request-access input[type=submit]").addClass("disabled"),$(".request-access input[type=submit]").attr("disabled",!0),$(".request-access .progress").show(),!0):($(".error-message .container").animate({backgroundColor:"#FFFF00"},500,function(){$(this).animate({backgroundColor:"#FAFAFA"},function(){$(this).css("background-color","transparent")})}),!1)}),c=$(".feature-nav ul li"),d=!1,c.click(function(){d||$(this).hasClass("selected")||(c.removeClass("selected"),$(this).addClass("selected"),f())}).disableSelection(),$(".dual-cards .card").click(function(){d||f(!0)}).disableSelection(),$("a#request-invitation-footer").click(function(){$("#beta_signup_email").focus()}),b={imageBtnPrev:"/assets/beta_signup/lightbox-prev.png",imageBtnNext:"/assets/beta_signup/lightbox-next.png"},$(".content-mix a.light-box").lightBox(b),$(".features a.light-box").lightBox(b),$("a.light-box-group, .screen-shots a").lightBox($.extend(b,{fixedNavigation:!0}))}),jQuery.fn.inputLabelize=function(){this.focus(function(){var a=!1,b,c,d;$(this).data("original-value")||(a=!0,$(this).data("original-value",$(this).val())),b=$('<div id="'+$(this).attr("id")+'_faded" class="faded-request-access">'),b.text($(this).data("original-value")),b.css("position","absolute"),b.css("width",$(this).width()+"px"),b.css("height",$(this).height()+"px"),d=this,c="1 -3",$.browser.mozilla?$.browser.versionInt>=5?c="0 -2":c="1 -2":$.browser.msie&&(c="-1 -2"),b.position({my:"top left",at:"top left",of:$(this),offset:c}).click(function(){$(d).focus()}),!this.firstClick&&$(this).data("original-value")!==$(this).val()?b.hide():$(this).val(""),setTimeout(function(){$("section.content").append(b)},0),$(this).addClass("enabled")}).keyup(function(){$(this).val()===""?$(".faded-request-access").show():$(".faded-request-access").hide()}).blur(function(){$(this).val().replace(/\s+/)===""&&($(this).val($(this).data("original-value")),$(this).removeClass("enabled")),$(".faded-request-access").remove()})};